import{r as s,j as e}from"./index-22430338.js";import{T as N}from"./topNavbar-8a7575ae.js";import{a as y}from"./axios-dd1c8fc2.js";import{b as g}from"./utill-834e5e31.js";import{S as d}from"./sweetalert2.all-bcf0cdbb.js";function C(){const[m,p]=s.useState([]),[n,u]=s.useState(""),[i,h]=s.useState(""),[c,f]=s.useState({}),[o,j]=s.useState("");s.useEffect(()=>{const t=localStorage.getItem("authToken");t&&j(t)},[]),s.useEffect(()=>{(async()=>{if(o)try{const l=(await y.get(`${g}/api/dailyCost`,{headers:{Authorization:`Bearer ${o}`}})).data.data.map(r=>{const x=new Date(r.date);return{...r,date:x.toISOString().split("T")[0],time:x.toTimeString().split(" ")[0]}});p(l)}catch{d.fire({title:"Error!",text:"Failed to fetch expenses data",icon:"error",confirmButtonText:"OK"})}})()},[o]);const w=()=>{const t={};return(!n||isNaN(Number(n)))&&(t.amount="  Please enter a valid number"),i.trim()||(t.reason="  Reason is required"),f(t),Object.keys(t).length===0},b=async()=>{if(!w())return;const t=new Date,a=t.toISOString().split("T")[0],l=t.toTimeString().split(" ")[0],r={amount:parseFloat(n),reason:i,date:a,time:l};try{await y.post(`${g}/api/dailyCost`,r,{headers:{Authorization:`Bearer ${o}`}}),d.fire({title:"Success!",text:"Expense added successfully",icon:"success",confirmButtonText:"OK"}),p([...m,{...r}]),u(""),h(""),f({})}catch{d.fire({title:"Error!",text:"Failed to add expense",icon:"error",confirmButtonText:"OK"})}},v=()=>{};return e.jsxs("div",{className:"m-4",children:[e.jsx("div",{children:e.jsx(N,{})}),e.jsxs("div",{className:"mt-[3vw] flex gap-5",children:[e.jsxs("div",{className:"flex flex-col w-1/3",children:[e.jsx("input",{type:"text",className:"p-2 text-white border border-gray-300 rounded bg-[#181738] border-[#5356EC] w-[25vw] h-[7vh] rounded-[15px] opacity-50",placeholder:"Amount",value:n,onChange:t=>u(t.target.value)}),c.amount&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.amount})]}),e.jsxs("div",{className:"flex flex-col w-2/3",children:[e.jsx("input",{type:"text",className:"p-2 border text-white border-gray-300 rounded bg-[#181738] border-[#5356EC] rounded-[15px] opacity-50",placeholder:"Reason",value:i,onChange:t=>h(t.target.value)}),c.reason&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.reason})]})]}),e.jsxs("div",{className:"mt-[5vh] flex justify-end space-x-10",children:[e.jsxs("button",{onClick:b,className:"buttons-styles bg-green-button w-[7vw] h-[5vh] text-center rounded-xl flex justify-center items-center",children:[e.jsx("img",{src:"src/assets/icons/Add Btn.svg",alt:"add icon"}),"ADD"]}),e.jsxs("button",{onClick:v,className:"buttons-styles bg-red-button w-[8vw] h-[5vh] text-center rounded-xl flex justify-center items-center",children:[e.jsx("img",{src:"src/assets/icons/Delete Btn.svg",alt:"delete icon"}),"DELETE"]})]}),e.jsx("div",{className:"mt-5 m-4",children:e.jsxs("table",{className:"min-w-full divide-y table-styles",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"})]})}),e.jsx("tbody",{children:m.map((t,a)=>e.jsxs("tr",{className:"text-white font-semibold hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-500",children:t.amount}),e.jsx("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-500",children:t.reason}),e.jsx("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-500",children:t.date}),e.jsx("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-500",children:t.time})]},a))})]})})]})}export{C as default};
