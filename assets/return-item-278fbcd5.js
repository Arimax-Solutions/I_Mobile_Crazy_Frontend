import{r as s,j as t}from"./index-22430338.js";import{T as q}from"./topNavbar-8a7575ae.js";import{B as w}from"./buttons-138cfeed.js";import{a as j}from"./axios-dd1c8fc2.js";import{b as v}from"./utill-834e5e31.js";import{S as m}from"./sweetalert2.all-bcf0cdbb.js";import{C as z}from"./combobox-9c5f6775.js";const F=[{value:"Samsung",label:"Samsung"},{value:"Apple",label:"Apple"},{value:"OMS",label:"OMS"}];function V(){const[k,y]=s.useState([]),[x,N]=s.useState(null),[c,u]=s.useState(""),[l,p]=s.useState(""),[i,h]=s.useState(""),[d,f]=s.useState(""),[o,g]=s.useState(""),[C,B]=s.useState(""),[r,n]=s.useState({category:"",name:"",brand:"",reason:"",contact_number:""});s.useEffect(()=>{A()},[]);const S=()=>{const e={category:typeof c=="string"&&c.trim()===""?"Category is required":"",name:typeof l=="string"&&l.trim()===""?"Name is required":"",brand:typeof i=="string"&&i.trim()===""?"Brand is required":"",reason:typeof d=="string"&&d.trim()===""?"Reason is required":"",contact_number:typeof o=="string"&&(o.trim()===""||o.length!==10)?"Contact number must be 10 digits":""};return n(e),Object.values(e).every(a=>a==="")},A=async()=>{const e=localStorage.getItem("authToken");if(e){B(e);try{const a=await j.get(`${v}/api/returnItem`,{headers:{Authorization:`Bearer ${e}`}});a.data&&Array.isArray(a.data.data)?y(a.data.data):console.error("Invalid data format received from server:",a.data)}catch(a){console.error("Error fetching items:",a)}}else console.log("No token found")},E=async()=>{if(!S())return;const e={category:c,name:l,brand:i,reason:d,contact_number:o};try{const a=await j.post(`${v}/api/returnItem`,e,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`}});a.data.status===200&&(m.fire({title:"Success!",text:"Item added successfully",icon:"success",confirmButtonText:"OK"}),p(""),u(""),h(""),f(""),g(""),y(b=>[...b,a.data.data]))}catch(a){console.error("Error adding user:",a),m.fire({title:"Error!",text:"Failed to add user",icon:"error",confirmButtonText:"OK"})}},R=e=>{N(e),h(e.brand),u(e.category),g(e.contact_number),p(e.name),f(e.reason),n({category:"",name:"",brand:"",reason:"",contact_number:""})},T=async()=>{if(!x){m.fire({title:"Error!",text:"No item selected for update",icon:"error",confirmButtonText:"OK"});return}if(!S())return;const e={...x,brand:i,category:c,contact_number:o,name:l,reason:d};try{(await j.put(`${v}/api/returnItem/${x.return_phone_id}`,e,{headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"}})).status===200&&(m.fire({title:"Success!",text:"Phone data updated successfully",icon:"success",confirmButtonText:"OK"}),y(b=>b.map(_=>_.return_phone_id===x.return_phone_id?e:_)),N(null),u(""),p(""),h(""),f(""),g(""))}catch{m.fire({title:"Error!",text:"Failed to update return phone data",icon:"error",confirmButtonText:"OK"})}},I=()=>{},O=e=>{u(e.target.value),e.target.value.trim()!==""&&n(a=>({...a,category:""}))},$=e=>{p(e.target.value),e.target.value.trim()!==""&&n(a=>({...a,name:""}))},P=e=>{f(e.target.value),e.target.value.trim()!==""&&n(a=>({...a,reason:""}))},D=e=>{g(e.target.value),e.target.value.trim()!==""&&e.target.value.length===10&&n(a=>({...a,contact_number:""}))},K=e=>{h(e.target.value),e.target.value!==""&&n(a=>({...a,brand:""}))};return t.jsxs("div",{className:"m-4 w-full",children:[t.jsx("div",{className:"m-4",children:t.jsx(q,{})}),t.jsxs("div",{className:"m-4 text-white font-semibold",children:[t.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row justify-between ",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("input",{className:`text-feild mb-1 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1 ${r.category?"border-red-500":""}`,value:c,onChange:O,placeholder:"   Category"}),r.category&&t.jsx("span",{className:"text-red-500 ml-[1vw] text-xs",children:r.category})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("input",{className:`text-feild mb-1 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1 ${r.name?"border-red-500":""}`,value:l,onChange:$,placeholder:"   Name"}),r.name&&t.jsx("span",{className:"text-red-500 ml-[1vw] text-xs",children:r.name})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx(z,{value:i,onChange:K,options:F,placeholder:"  Brand"}),r.brand&&t.jsx("span",{className:"text-red-500 ml-[1vw] text-xs",children:r.brand})]})]}),t.jsxs("div",{className:"mt-5 flex flex-col sm:flex-row justify-between",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("input",{className:`text-feild mb-1 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1 ${r.reason?"border-red-500":""}`,value:d,onChange:P,placeholder:"   Reason"}),r.reason&&t.jsx("span",{className:"text-red-500 ml-[1vw] text-xs",children:r.reason})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("input",{className:`text-feild mb-1 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1 ${r.contact_number?"border-red-500":""}`,value:o,onChange:D,placeholder:"   Contact Number"}),r.contact_number&&t.jsx("span",{className:"text-red-500 ml-[1vw] text-xs",children:r.contact_number})]})]})]}),t.jsxs("div",{className:"m-4 flex mt-5 gap-x-[3vw] justify-end",children:[t.jsx(w,{onClick:E,className:"buttons-styles bg-green-button w-full sm:w-[20%] md:w-[15%] lg:w-[15%] xl:w-[10vw] h-[5vh] text-center rounded-xl flex justify-center items-center",iconSrc:"src/assets/icons/Add Btn.svg",iconAlt:"add icon",children:"ADD"}),t.jsx(w,{onClick:I,className:"buttons-styles bg-red-button w-full sm:w-[20%] md:w-[15%] lg:w-[15%] xl:w-[10vw] h-[5vh] text-center rounded-xl flex justify-center items-center",iconSrc:"src/assets/icons/Delete Btn.svg",iconAlt:"delete icon",children:"DELETE"}),t.jsx(w,{onClick:T,className:"buttons-styles bg-blue-button w-full sm:w-[20%] md:w-[15%] lg:w-[15%] xl:w-[10vw] h-[5vh] text-center rounded-xl flex justify-center items-center",iconSrc:"src/assets/icons/Update Btn.svg",iconAlt:"update icon",children:"UPDATE"})]}),t.jsx("div",{className:"m-4 mt-5 overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y table-styles",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Id"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Brand"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Number"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:k.filter(e=>e!=null).map(e=>t.jsxs("tr",{onClick:()=>R(e),className:"hover:bg-gray-200 cursor-pointer",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.return_phone_id}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.brand}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.category}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.contact_number}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.name}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.reason})]},e.return_phone_id))})]})})]})}export{V as default};
