import{r as a,j as e}from"./index-22430338.js";import{T as P}from"./topNavbar-8a7575ae.js";import{a as b}from"./axios-dd1c8fc2.js";import{b as C}from"./utill-834e5e31.js";import{S as i}from"./sweetalert2.all-bcf0cdbb.js";const R=()=>{const[f,o]=a.useState(""),[y,d]=a.useState(""),[g,x]=a.useState(""),[j,m]=a.useState(""),[n,p]=a.useState(""),[w,u]=a.useState(""),[l,h]=a.useState(""),[k,B]=a.useState(""),[T,_]=a.useState([]),[N,S]=a.useState(null),[r,E]=a.useState({}),v=async()=>{const t=localStorage.getItem("authToken");if(t){B(t);try{const s=await b.get(`${C}/api/items`,{headers:{Authorization:`Bearer ${t}`}});s.data&&Array.isArray(s.data.data)?_(s.data.data):console.error("Invalid data format received from server:",s.data)}catch(s){console.error("Error fetching items:",s)}}else console.log("No token found")};a.useEffect(()=>{v()},[]);const A=t=>{S(t),o(t.category),d(t.name),x(t.brand),m(t.colour),p(t.price.toString()),u(t.warranty_period),h(t.qty)},O=async()=>{if(!I())return;const t={category:f,name:y,brand:g,colour:j,price:parseFloat(n),warranty_period:w,qty:l};try{const s=await b.post(`${C}/api/items`,t,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`}});console.log(s),i.fire({title:"Success!",text:"Item added successfully",icon:"success",confirmButtonText:"OK"}),o(""),d(""),x(""),m(""),p(""),u(""),h(""),v()}catch(s){console.error("Error adding item:",s),i.fire({title:"Error!",text:"Failed to add item",icon:"error",confirmButtonText:"OK"})}},$=async()=>{if(!N){console.error("No item selected for deletion");return}try{const t=await b.delete(`${C}/api/items/${N.item_id}`,{headers:{Authorization:`Bearer ${k}`}});console.log(t),i.fire({title:"Success!",text:"Item deleted successfully",icon:"success",confirmButtonText:"OK"}),S(null),o(""),d(""),x(""),m(""),p(""),u(""),h(""),v()}catch(t){console.error("Error deleting item:",t),i.fire({title:"Error!",text:"Failed to delete item",icon:"error",confirmButtonText:"OK"})}},D=async()=>{if(!I()||!N)return;const t={category:f,name:y,brand:g,colour:j,price:parseFloat(n),warranty_period:w,qty:l};try{const s=await b.put(`${C}/api/items/${N.item_id}`,t,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${k}`}});console.log(s),i.fire({title:"Success!",text:"Item updated successfully",icon:"success",confirmButtonText:"OK"}),S(null),o(""),d(""),x(""),m(""),p(""),u(""),h(""),v()}catch(s){console.error("Error updating item:",s),i.fire({title:"Error!",text:"Failed to update item",icon:"error",confirmButtonText:"OK"})}},I=()=>{const t={};return f||(t.category="Category is required"),y||(t.name="Name is required"),g||(t.brand="Brand is required"),j||(t.colour="Colour is required"),n||(t.price="Price is required"),w||(t.warranty_period="Warranty period is required"),l||(t.qty="Quantity is required"),n&&isNaN(parseFloat(n))&&(t.price="Price must be a number"),l&&isNaN(parseFloat(l))&&(t.qty="Quantity must be a number"),E(t),Object.keys(t).length===0},c=(t,s)=>F=>{if(t(F.target.value),r[s]){const q={...r};delete q[s],E(q)}};return e.jsxs("div",{className:"m-4 w-full",children:[e.jsx("div",{className:"m-4",children:e.jsx(P,{})}),e.jsxs("div",{className:"m-4 text-white font-semibold",children:[e.jsxs("div",{className:"mt-5 flex justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{className:"text-feild",value:f,onChange:c(o,"category"),placeholder:"   category"}),r.category&&e.jsx("span",{className:"text-red-500 text-xs ml-[0.5vw]",children:r.category})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{className:"text-feild",value:y,onChange:c(d,"name"),placeholder:"   name"}),r.name&&e.jsx("span",{className:"text-red-500 text-xs ml-[0.5vw]",children:r.name})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{className:"text-feild",value:g,onChange:c(x,"brand"),placeholder:"   brand"}),r.brand&&e.jsx("span",{className:"text-red-500 text-xs ml-[0.5vw]",children:r.brand})]})]}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{className:"text-feild",value:j,onChange:c(m,"colour"),placeholder:"   colour"}),r.colour&&e.jsx("span",{className:"text-red-500 text-xs ml-[0.5vw]",children:r.colour})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{className:"text-feild",value:n,onChange:c(p,"price"),placeholder:"   price"}),r.price&&e.jsx("span",{className:"text-red-500 text-xs ml-[0.5vw]",children:r.price})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{className:"text-feild",value:w,onChange:c(u,"warranty_period"),placeholder:"   warranty period"}),r.warranty_period&&e.jsx("span",{className:"text-red-500 text-xs ml-[0.5vw]",children:r.warranty_period})]})]})]}),e.jsxs("div",{className:"m-4 flex justify-between items-end",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("input",{className:"text-feild",value:l,onChange:c(h,"qty"),placeholder:"   qty"}),r.qty&&e.jsx("span",{className:"text-red-500 text-xs ml-[0.5vw]",children:r.qty})]}),e.jsxs("div",{className:"flex  mt-5",children:[e.jsxs("button",{onClick:O,className:"mr-[6vw] buttons-styles bg-green-button w-[7vw] h-[5vh] text-center rounded-xl flex justify-center items-center",children:[e.jsx("img",{src:"src/assets/icons/Add Btn.svg",className:"mr-[0.3vw]",alt:"add icon"}),"ADD"]}),e.jsxs("button",{onClick:$,className:"mr-[6vw] buttons-styles bg-red-button w-[8vw] h-[5vh] text-center rounded-xl flex justify-center items-center",children:[e.jsx("img",{src:"src/assets/icons/Delete Btn.svg",className:"mr-[0.3vw]",alt:"delete icon"}),"DELETE"]}),e.jsxs("button",{onClick:D,className:"buttons-styles bg-blue-button w-[8vw] h-[5vh] text-center rounded-xl flex justify-center items-center",children:[e.jsx("img",{src:"src/assets/icons/Update Btn.svg",className:"mr-[0.3vw]",alt:"update icon"}),"UPDATE"]})]})]}),e.jsx("div",{className:"mt-5 m-4",children:e.jsxs("table",{className:"min-w-full divide-y table-styles",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Id"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Brand"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Color"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Warranty Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"})]})}),e.jsx("tbody",{children:T.map(t=>e.jsxs("tr",{className:" text-white font-semibold hover:bg-gray-50",onClick:()=>A(t),children:[e.jsx("td",{className:"px-6 py-2 whitespace-nowrap text-sm font-medium text-gray-500",children:t.item_id}),e.jsx("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-500",children:t.category}),e.jsx("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-500",children:t.name}),e.jsx("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-500",children:t.brand}),e.jsx("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-500",children:t.colour}),e.jsx("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-500",children:t.price}),e.jsx("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-500",children:t.warranty_period}),e.jsx("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-500",children:t.qty})]},t.item_id))})]})})]})};export{R as default};
