import{r as n,b as R,j as e,M as W,B as H,T as q,z as C}from"./mui-core-8430a145.js";import{T as le}from"./topNavbar-62e82537.js";import{S as f}from"./sweetalert2.all-4a184b36.js";import{a as F}from"./axios-dd1c8fc2.js";import{b as $}from"./utill-834e5e31.js";import J from"./proceed-payment-5b1e7a43.js";import{u as Y}from"./index-e2260fdc.js";function re(l){if(!/^(([5,6,7,8,9]{1})([0-9]{1})([0,1,2,3,5,6,7,8]{1})([0-9]{6})([v|V|x|X]))|(([1,2]{1})([0,9]{1})([0-9]{2})([0,1,2,3,5,6,7,8]{1})([0-9]{7}))/.test(l))throw f.fire({title:"Error!",text:"Please enter the valid NIC number",icon:"error",confirmButtonText:"OK"}),new Error("please fill the form")}function ne(l){if(!/^[0]{1}[7]{1}[01245678]{1}[0-9]{7}$/.test(l))throw f.fire({title:"Error!",text:"Please enter the valid contact number",icon:"error",confirmButtonText:"OK"}),new Error("please fill the form");return Number.parseInt(l)}function oe(l){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l))throw f.fire({title:"Error!",text:"Please enter the valid email",icon:"error",confirmButtonText:"OK"}),new Error("please fill the form")}function de(l){if(!l.trim())throw f.fire({title:"Error!",text:"Please enter the valid name",icon:"error",confirmButtonText:"OK"}),new Error("please fill the form")}const G={position:"absolute",color:"white",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"fit-content",bgcolor:"#14141E",border:"2px solid #000",boxShadow:24,p:4,borderRadius:"10px"};function ce(l){const[y,P]=n.useState(""),[I,A]=n.useState(""),[j,p]=n.useState(""),[o,h]=n.useState({imei:"",modelId:"",modelName:"",storage:"",warranty:"",colour:"",batteryHealth:"",price:""}),[E,w]=n.useState([]),[v,O]=n.useState(""),[N,r]=n.useState(""),[d,S]=n.useState(""),[k,D]=n.useState(""),B=Y();async function K(t){try{const m=await F.get(`${$}/api/imei/check-sale/${t}`),{modelId:b,storage:L,warranty:X,colour:ee,batteryHealth:te,price:ae}=m.data,se=b?b.name:"Default Model Name";h({imei:t,modelId:(b==null?void 0:b.id)||"Default Model ID",modelName:se,storage:L||"Unknown Storage",warranty:X,colour:ee||"Default Color",batteryHealth:te||"Unknown Battery Health",price:ae||"0"})}catch(m){console.error("Error fetching phone details:",m),f.fire({title:"Error!",text:"Unable to fetch phone details",icon:"error",confirmButtonText:"OK"})}}function T(t){t.key==="Enter"&&(t.preventDefault(),K(o.imei))}async function i(){try{de(N),re(j),oe(y);const t=ne(I),m=await F.post(`${$}/api/customer`,{name:N,email:y,contact_phone:t,nic:j}),{id:b}=m.data;D(b),l.handleAddNewCustomerModelClose(),await f.fire({title:"Success!",text:"Customer saved successfully",icon:"success",confirmButtonText:"OK"})}catch(t){l.handleAddNewCustomerModelClose(),console.error(t),await f.fire({title:"Error!",text:"Something happened, cannot save customer",icon:"error",confirmButtonText:"OK"})}}function g(){o.imei?(w(t=>[...t,o]),h({imei:"",modelId:"",modelName:"",storage:"",warranty:"",colour:"",batteryHealth:"",price:""}),l.handleAddNewPhoneModelClose()):f.fire({title:"Error!",text:"IMEI cannot be empty",icon:"error",confirmButtonText:"OK"})}const[c,s]=R.useState({item_id:"",category:"",brand:"",name:"",colour:"",warranty_period:"",qty:"",price:""}),[u,_]=R.useState([]),U=async()=>{try{const t=await F.get(`http://localhost:8080/api/items/search/${c.name}`);if(t.data.status===200&&t.data.data.length>0){const m=t.data.data[0];s({item_id:m.item_id,category:m.category,brand:m.brand,name:m.name,colour:m.colour,warranty_period:m.warranty_period,qty:m.qty,price:m.price})}else s({item_id:"",category:"",brand:"",name:"",colour:"",warranty_period:"",qty:"",price:""}),alert("No items found")}catch(t){console.error("Error fetching item data:",t)}},V=t=>{t.key==="Enter"&&U()},Q=()=>{c.name?(_([...u,c]),s({item_id:"",category:"",brand:"",name:"",colour:"",warranty_period:"",qty:"",price:""}),l.handleAddNewItemModelClose()):alert("Please enter item details before adding.")},a=t=>{console.log("ID : "+k),B(`/orderType/${t}`,{state:{phones:E,items:u,customerName:N,contactNumber:v,customerId:k,customerOutstanding:d}})},x=t=>{O(t.target.value)},M=async()=>{try{const m=await(await fetch(`${$}/api/customer/contact/${v}`)).json();if(m.status===200&&m.data.length>0){const b=m.data[0];r(b.name),D(b.customer_id),S(b.outstandingAmount),console.log(b.outstandingAmount)}else f.fire({title:"Error!",text:"Customer not found",icon:"error",confirmButtonText:"OK"})}catch(t){console.error("Error fetching customer data:",t),r("Error fetching customer data")}},z=t=>{t.key==="Enter"&&M()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4 m-4",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("input",{type:"text",value:v,onChange:x,onKeyPress:z,placeholder:"  Contact number",className:"text-feild text-white font-semibold"}),e.jsx("input",{type:"text",value:N,placeholder:"  Customer name",className:"text-feild text-white font-semibold",readOnly:!0})]}),+d>0&&e.jsxs("div",{className:"mt-2 text-red-500",children:["Outstanding Amount: ",d]})]}),e.jsx("div",{className:"mt-5 m-4",children:e.jsxs("table",{className:"min-w-full divide-y table-styles border-2",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800 text-gray-400 text-xs",children:[e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"IMEI"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Model"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Storage"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Warranty"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Color"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Battery Health"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Price"})]})}),e.jsx("tbody",{className:"overflow-y-auto max-h-80",children:E.map((t,m)=>e.jsxs("tr",{className:"text-white font-semibold hover:bg-gray-700 text-xs",children:[e.jsx("td",{className:"px-2 py-1 truncate",children:t.imei}),e.jsx("td",{className:"px-2 py-1 truncate",children:t.modelName}),"  ",e.jsx("td",{className:"px-2 py-1 truncate",children:t.storage}),e.jsx("td",{className:"px-2 py-1 truncate",children:t.warranty}),e.jsx("td",{className:"px-2 py-1 truncate",children:t.colour}),e.jsx("td",{className:"px-2 py-1 truncate",children:t.batteryHealth}),e.jsx("td",{className:"px-2 py-1 truncate",children:t.price})]},m))})]})}),u.length>0&&e.jsx("div",{className:"mt-5 m-4",children:e.jsxs("table",{className:"min-w-full divide-y table-styles border-2",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800 text-gray-400 text-xs",children:[e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Brand"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Category"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Colour"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Name"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Price"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Qty"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Warranty"})]})}),e.jsx("tbody",{className:"overflow-y-auto max-h-80",children:u.map((t,m)=>e.jsxs("tr",{className:"text-white font-semibold hover:bg-gray-700 text-xs",children:[e.jsx("td",{className:"px-2 py-1 truncate",children:t.brand}),e.jsx("td",{className:"px-2 py-1 truncate",children:t.category}),e.jsx("td",{className:"px-2 py-1 truncate",children:t.colour}),e.jsx("td",{className:"px-2 py-1 truncate",children:t.name}),e.jsx("td",{className:"px-2 py-1 truncate",children:t.price}),e.jsx("td",{className:"px-2 py-1 truncate",children:t.qty}),e.jsx("td",{className:"px-2 py-1 truncate",children:t.warranty_period})]},m))})]})}),e.jsxs("div",{className:"m-4 flex gap-2 mt-5 justify-end",children:[e.jsx("button",{className:"bg-[#00900F] p-1 rounded-md text-white font-bold",onClick:()=>a("retail-order"),children:"Proceed To Payment"}),e.jsx("button",{className:"bg-[#B10000] p-1 rounded-md text-white font-bold",children:"Cancel Payment"})]}),e.jsx("div",{children:e.jsx(W,{className:"z-auto",open:l.isAddNewCustomerModelOpen,onClose:l.handleAddNewCustomerModelClose,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(H,{sx:G,children:[e.jsx(q,{className:"text-center",id:"modal-modal-title",variant:"h5",component:"h2",children:"Add new customer"}),e.jsxs("div",{className:"w-full flex flex-col items-center mt-2",children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:N,onChange:t=>r(t.target.value),placeholder:"   Customer Name"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:y,onChange:t=>P(t.target.value),placeholder:"   Email"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:I,onChange:t=>A(t.target.value),placeholder:"   Whatsapp Number"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:j,onChange:t=>p(t.target.value),placeholder:"   Nic"})]}),e.jsxs("div",{className:"w-full flex gap-2 mt-5 justify-center",children:[e.jsx(C,{onClick:i,variant:"contained",color:"success",children:"Add"}),e.jsx(C,{onClick:l.handleAddNewCustomerModelClose,variant:"contained",color:"error",children:"Close"})]})]})})}),e.jsx("div",{children:e.jsx(W,{open:l.isAddNewPhoneModelOpen,onClose:l.handleAddNewPhoneModelClose,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(H,{sx:G,children:[e.jsx(q,{className:"",id:"modal-modal-title",variant:"h5",component:"h2",children:"Add Phone"}),e.jsxs("div",{className:"w-full flex flex-col mt-2",children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:o.imei,onChange:t=>h({...o,imei:t.target.value}),onKeyDown:T,placeholder:"   IMEI Number"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:o.modelName,onChange:t=>h({...o,modelName:t.target.value}),placeholder:"   Model Name"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:o.storage,onChange:t=>h({...o,storage:t.target.value}),placeholder:"   Storage"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:o.warranty,onChange:t=>h({...o,warranty:t.target.value}),placeholder:"   Warranty"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:o.colour,onChange:t=>h({...o,colour:t.target.value}),placeholder:"   Colour"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:o.batteryHealth,onChange:t=>h({...o,batteryHealth:t.target.value}),placeholder:"   Battery Health"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:o.price,onChange:t=>h({...o,price:t.target.value}),placeholder:"   Price"})]}),e.jsxs("div",{className:"w-full flex gap-2 mt-5 justify-end",children:[e.jsx(C,{onClick:g,variant:"contained",color:"success",children:"Add"}),e.jsx(C,{onClick:l.handleAddNewPhoneModelClose,variant:"contained",color:"error",children:"Close"})]})]})]})})}),e.jsx("div",{children:e.jsx(W,{open:l.isAddNewItemsModelOpen,onClose:l.handleAddNewItemModelClose,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(H,{sx:{...G},children:[e.jsx(q,{id:"modal-modal-title",variant:"h5",component:"h2",children:"Add Item"}),e.jsxs("div",{className:"w-full flex flex-col mt-2",children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:c.name,onChange:t=>s({...c,name:t.target.value}),onKeyDown:V,placeholder:"Item Name"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:c.category,onChange:t=>s({...c,category:t.target.value}),placeholder:"Category"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:c.brand,onChange:t=>s({...c,brand:t.target.value}),placeholder:"Brand"})]}),e.jsxs("div",{children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:c.colour,onChange:t=>s({...c,colour:t.target.value}),placeholder:"Color"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:c.warranty_period,onChange:t=>s({...c,warranty_period:t.target.value}),placeholder:"Warranty Period"})]}),e.jsxs("div",{children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:c.qty,onChange:t=>s({...c,qty:t.target.value}),placeholder:"Quantity"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:c.price,onChange:t=>s({...c,price:t.target.value}),placeholder:"Price"})]})]}),e.jsxs("div",{className:"w-full flex gap-2 mt-5 justify-end",children:[e.jsx(C,{onClick:Q,variant:"contained",color:"success",children:"Add"}),e.jsx(C,{onClick:l.handleAddNewItemModelClose,variant:"contained",color:"error",children:"Close"})]})]})})}),e.jsx(J,{phones:E,itemData:c,customerName:N,contactNumber:v,customerId:k,customerOutstanding:d})]})}const Z={position:"absolute",color:"white",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"fit-content",bgcolor:"#14141E",border:"2px solid #000",boxShadow:24,p:4,borderRadius:"10px"};function me(l){const y=Y(),[P,I]=n.useState(""),[A,j]=n.useState(""),[p,o]=n.useState(""),[h,E]=n.useState(""),[w]=n.useState(""),[v]=n.useState(""),[O]=n.useState(""),[N]=n.useState(""),[r,d]=n.useState({imei:"",modelId:"",modelName:"",storage:"",warranty:"",colour:"",batteryHealth:"",price:""}),[S,k]=n.useState([]),D=a=>{o(a.target.value)},B=async()=>{try{const x=await(await fetch(`${$}/api/shop/contact/${p}`)).json();if(x.status===200&&x.data.length>0){const M=x.data[0];j(M.shop_name),I(M.shop_id),E(M.outstanding)}else f.fire({title:"Error!",text:"Shop not found",icon:"error",confirmButtonText:"OK"})}catch(a){console.error("Error fetching customer data:",a),j("Error fetching customer data")}},K=a=>{a.key==="Enter"&&B()};function T(){r.imei?(k(a=>[...a,r]),d({imei:"",modelId:"",modelName:"",storage:"",warranty:"",colour:"",batteryHealth:"",price:""}),l.handleAddNewPhoneModelClose()):f.fire({title:"Error!",text:"IMEI cannot be empty",icon:"error",confirmButtonText:"OK"})}const[i,g]=n.useState({item_id:"",category:"",brand:"",name:"",colour:"",warranty_period:"",qty:"",price:""}),[c]=n.useState([]),s=async()=>{try{const a=await F.get(`http://localhost:8080/api/items/search/${i.name}`);if(a.data.status===200&&a.data.data.length>0){const x=a.data.data[0];g({item_id:x.item_id,category:x.category,brand:x.brand,name:x.name,colour:x.colour,warranty_period:x.warranty_period,qty:x.qty,price:x.price})}else g({item_id:"",category:"",brand:"",name:"",colour:"",warranty_period:"",qty:"",price:""}),alert("No items found")}catch(a){console.error("Error fetching item data:",a)}},u=a=>{a.key==="Enter"&&s()},_=()=>{i.name?(g({item_id:"",category:"",brand:"",name:"",colour:"",warranty_period:"",qty:"",price:""}),l.handleAddNewItemModelClose()):alert("Please enter item details before adding.")};async function U(a){try{const x=await F.get(`${$}/api/imei/check-sale/${a}`),{modelId:M,storage:z,warranty:t,colour:m,batteryHealth:b,price:L}=x.data,X=M?M.name:"Default Model Name";d({imei:a,modelId:(M==null?void 0:M.id)||"Default Model ID",modelName:X,storage:z||"Unknown Storage",warranty:t,colour:m||"Default Color",batteryHealth:b||"Unknown Battery Health",price:L||"0"})}catch(x){console.error("Error fetching phone details:",x),f.fire({title:"Error!",text:"Unable to fetch phone details",icon:"error",confirmButtonText:"OK"})}}function V(a){a.key==="Enter"&&(a.preventDefault(),U(r.imei))}const Q=a=>{console.log("ID : "+P),y(`/orderType/${a}`,{state:{wholesalePhones:S,wholesaleItems:c,shopName:A,shopContactNumber:p,shopId:P,outstanding:h,address:w,shopEmail:v,shopOwnerNic:O,shopCreditLimit:N}})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4 m-4",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("input",{type:"text",value:p,onChange:D,onKeyPress:K,placeholder:"  Contact number",className:"text-feild text-white font-semibold"}),e.jsx("input",{type:"text",value:A,placeholder:"  Shop name",className:"text-feild text-white font-semibold",readOnly:!0})]}),+h>0&&e.jsxs("div",{className:"mt-2 text-red-500",children:["Outstanding Amount: ",h]})]}),e.jsx("div",{className:"mt-5 m-4",children:e.jsxs("table",{className:"min-w-full divide-y table-styles border-2",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800 text-gray-400 text-xs",children:[e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"IMEI"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Model"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Storage"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Warranty"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Color"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Battery Health"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Price"})]})}),e.jsx("tbody",{className:"overflow-y-auto max-h-80",children:S.map((a,x)=>e.jsxs("tr",{className:"text-white font-semibold hover:bg-gray-700 text-xs",children:[e.jsx("td",{className:"px-2 py-1 truncate",children:a.imei}),e.jsx("td",{className:"px-2 py-1 truncate",children:a.modelName}),"  ",e.jsx("td",{className:"px-2 py-1 truncate",children:a.storage}),e.jsx("td",{className:"px-2 py-1 truncate",children:a.warranty}),e.jsx("td",{className:"px-2 py-1 truncate",children:a.colour}),e.jsx("td",{className:"px-2 py-1 truncate",children:a.batteryHealth}),e.jsx("td",{className:"px-2 py-1 truncate",children:a.price})]},x))})]})}),c.length>0&&e.jsx("div",{className:"mt-5 m-4",children:e.jsxs("table",{className:"min-w-full divide-y table-styles border-2",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800 text-gray-400 text-xs",children:[e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Brand"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Category"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Colour"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Name"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Price"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Qty"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Warranty"})]})}),e.jsx("tbody",{className:"overflow-y-auto max-h-80",children:c.map((a,x)=>e.jsxs("tr",{className:"text-white font-semibold hover:bg-gray-700 text-xs",children:[e.jsx("td",{className:"px-2 py-1 truncate",children:a.brand}),e.jsx("td",{className:"px-2 py-1 truncate",children:a.category}),e.jsx("td",{className:"px-2 py-1 truncate",children:a.colour}),e.jsx("td",{className:"px-2 py-1 truncate",children:a.name}),e.jsx("td",{className:"px-2 py-1 truncate",children:a.price}),e.jsx("td",{className:"px-2 py-1 truncate",children:a.qty}),e.jsx("td",{className:"px-2 py-1 truncate",children:a.warranty_period})]},x))})]})}),e.jsxs("div",{className:"m-4 flex gap-2 mt-5 justify-end",children:[e.jsx("button",{className:"bg-[#00900F] p-1 rounded-md text-white font-bold",onClick:()=>Q("wholesale-order"),children:"Proceed To Payment"}),e.jsx("button",{className:"bg-[#B10000] p-1 rounded-md text-white font-bold",children:"Cancel Payment"})]}),e.jsx("div",{children:e.jsx(W,{open:l.isAddNewPhoneModelOpen,onClose:l.handleAddNewPhoneModelClose,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(H,{sx:Z,children:[e.jsx(q,{className:"",id:"modal-modal-title",variant:"h5",component:"h2",children:"Add Phone"}),e.jsxs("div",{className:"w-full flex flex-col mt-2",children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:r.imei,onChange:a=>d({...r,imei:a.target.value}),onKeyDown:V,placeholder:"   IMEI Number"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:r.modelName,onChange:a=>d({...r,modelName:a.target.value}),placeholder:"   Model Name"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:r.storage,onChange:a=>d({...r,storage:a.target.value}),placeholder:"   Storage"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:r.warranty,onChange:a=>d({...r,warranty:a.target.value}),placeholder:"   Warranty"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:r.colour,onChange:a=>d({...r,colour:a.target.value}),placeholder:"   Colour"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:r.batteryHealth,onChange:a=>d({...r,batteryHealth:a.target.value}),placeholder:"   Battery Health"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:r.price,onChange:a=>d({...r,price:a.target.value}),placeholder:"   Price"})]}),e.jsxs("div",{className:"w-full flex gap-2 mt-5 justify-end",children:[e.jsx(C,{onClick:T,variant:"contained",color:"success",children:"Add"}),e.jsx(C,{onClick:l.handleAddNewPhoneModelClose,variant:"contained",color:"error",children:"Close"})]})]})]})})}),e.jsx("div",{children:e.jsx(W,{open:l.isAddNewItemsModelOpen,onClose:l.handleAddNewItemModelClose,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(H,{sx:{...Z},children:[e.jsx(q,{id:"modal-modal-title",variant:"h5",component:"h2",children:"Add Item"}),e.jsxs("div",{className:"w-full flex flex-col mt-2",children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:i.name,onChange:a=>g({...i,name:a.target.value}),onKeyDown:u,placeholder:"Item Name"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:i.category,onChange:a=>g({...i,category:a.target.value}),placeholder:"Category"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:i.brand,onChange:a=>g({...i,brand:a.target.value}),placeholder:"Brand"})]}),e.jsxs("div",{children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:i.colour,onChange:a=>g({...i,colour:a.target.value}),placeholder:"Color"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:i.warranty_period,onChange:a=>g({...i,warranty_period:a.target.value}),placeholder:"Warranty Period"})]}),e.jsxs("div",{children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:i.qty,onChange:a=>g({...i,qty:a.target.value}),placeholder:"Quantity"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:i.price,onChange:a=>g({...i,price:a.target.value}),placeholder:"Price"})]})]}),e.jsxs("div",{className:"w-full flex gap-2 mt-5 justify-end",children:[e.jsx(C,{onClick:_,variant:"contained",color:"success",children:"Add"}),e.jsx(C,{onClick:l.handleAddNewItemModelClose,variant:"contained",color:"error",children:"Close"})]})]})})}),e.jsx(J,{wholesalePhones:S,wholesaleItemData:i,shopName:A,shopContactNumber:p,shopId:P,outstanding:h,address:w,shopEmail:v,shopOwnerNic:O,shopCreditLimit:N})]})}const ie={position:"absolute",color:"white",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"fit-content",bgcolor:"#14141E",border:"2px solid #000",boxShadow:24,p:4,borderRadius:"10px"};function xe(l){const y=Y(),[P,I]=n.useState(""),[A,j]=n.useState(""),[p,o]=n.useState(""),[h,E]=n.useState(""),[w]=n.useState(""),[v]=n.useState(""),[O]=n.useState(""),[N]=n.useState(""),[r,d]=n.useState({imei:"",modelName:"",storage:"",colour:"",price:""}),[S,k]=n.useState([]),D=s=>{o(s.target.value)},B=async()=>{try{const u=await(await fetch(`${$}/api/shop/contact/${p}`)).json();if(console.log("Number : "+p),u.status===200&&u.data.length>0){const _=u.data[0];j(_.shop_name),I(_.shop_id),E(_.outstanding)}else f.fire({title:"Error!",text:"Shop not found",icon:"error",confirmButtonText:"OK"})}catch(s){console.error("Error fetching customer data:",s),j("Error fetching customer data")}},K=s=>{s.key==="Enter"&&B()};function T(){console.log("Works"),r.imei?(k(s=>[...s,r]),d({imei:"",modelName:"",storage:"",colour:"",price:""}),l.handleAddNewPhoneModelClose()):f.fire({title:"Error!",text:"IMEI cannot be empty",icon:"error",confirmButtonText:"OK"})}async function i(s){try{const u=await F.get(`${$}/api/return/phone/imei/${s}`),{model:_,storage:U,colour:V,price:Q}=u.data;d({imei:s,modelName:_,storage:U||"Unknown Storage",colour:V||"Default Color",price:Q||"0"})}catch(u){console.error("Error fetching phone details:",u),f.fire({title:"Error!",text:"Unable to fetch phone details",icon:"error",confirmButtonText:"OK"})}}function g(s){s.key==="Enter"&&(s.preventDefault(),i(r.imei))}const c=s=>{console.log("ID : "+P),y(`/orderType/${s}`,{state:{returnPhones:S,shopNameReturn:A,shopContactNumberReturn:p,shopIdReturn:P,outstandingReturn:h,addressReturn:w,shopEmailReturn:v,shopOwnerNicReturn:O,shopCreditLimitReturn:N}})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4 m-4",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("input",{type:"text",value:p,onChange:D,onKeyPress:K,placeholder:"  Contact number",className:"text-feild text-white font-semibold"}),e.jsx("input",{type:"text",value:A,placeholder:"  Shop name",className:"text-feild text-white font-semibold",readOnly:!0})]}),+h>0&&e.jsxs("div",{className:"mt-2 text-red-500",children:["Outstanding Amount: ",h]})]}),e.jsx("div",{className:"mt-5 m-4",children:e.jsxs("table",{className:"min-w-full divide-y table-styles border-2",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800 text-gray-400 text-xs",children:[e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"IMEI"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Model"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Storage"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Color"}),e.jsx("th",{className:"px-2 py-1 text-left whitespace-nowrap",children:"Price"})]})}),e.jsx("tbody",{className:"overflow-y-auto max-h-80",children:S.map((s,u)=>e.jsxs("tr",{className:"text-white font-semibold hover:bg-gray-700 text-xs",children:[e.jsx("td",{className:"px-2 py-1 truncate",children:s.imei}),e.jsx("td",{className:"px-2 py-1 truncate",children:s.modelName}),"  ",e.jsx("td",{className:"px-2 py-1 truncate",children:s.storage}),e.jsx("td",{className:"px-2 py-1 truncate",children:s.colour}),e.jsx("td",{className:"px-2 py-1 truncate",children:s.price})]},u))})]})}),e.jsxs("div",{className:"m-4 flex gap-2 mt-5 justify-end",children:[e.jsx("button",{className:"bg-[#00900F] p-1 rounded-md text-white font-bold",onClick:()=>c("return-order"),children:"Proceed To Payment"}),e.jsx("button",{className:"bg-[#B10000] p-1 rounded-md text-white font-bold",children:"Cancel Payment"})]}),e.jsx("div",{children:e.jsx(W,{open:l.isAddNewPhoneModelOpen,onClose:l.handleAddNewPhoneModelClose,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(H,{sx:ie,children:[e.jsx(q,{className:"",id:"modal-modal-title",variant:"h5",component:"h2",children:"Add Phone"}),e.jsxs("div",{className:"w-full flex flex-col mt-2",children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:r.imei,onChange:s=>d({...r,imei:s.target.value}),onKeyDown:g,placeholder:"   IMEI Number"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:r.modelName,onChange:s=>d({...r,modelName:s.target.value}),placeholder:"   Model Name"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:r.storage,onChange:s=>d({...r,storage:s.target.value}),placeholder:"   Storage"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:r.colour,onChange:s=>d({...r,colour:s.target.value}),placeholder:"   Colour"}),e.jsx("input",{className:"text-feild mb-4 md:mb-0 md:w-[30%] lg:mx-2 md:mx-2 sm:mx-1",value:r.price,onChange:s=>d({...r,price:s.target.value}),placeholder:"   Price"})]}),e.jsxs("div",{className:"w-full flex gap-2 mt-5 justify-end",children:[e.jsx(C,{onClick:T,variant:"contained",color:"success",children:"Add"}),e.jsx(C,{onClick:l.handleAddNewPhoneModelClose,variant:"contained",color:"error",children:"Close"})]})]})]})})}),e.jsx(J,{returnPhones:S,shopNameReturn:A,shopContactNumberReturn:p,shopIdReturn:P,outstandingReturn:h,addressReturn:w,shopEmailReturn:v,shopOwnerNicReturn:O,shopCreditLimitReturn:N})]})}function be(){const[l,y]=R.useState(!1),[P,I]=R.useState(!1),[A,j]=R.useState(!1),[p,o]=R.useState(!1),[h,E]=R.useState(!1),[w,v]=n.useState("retail"),O=()=>y(!0),N=()=>y(!1),r=()=>j(!0),d=()=>j(!1),S=()=>I(!0),k=()=>I(!1),D=()=>o(!1),B=()=>o(!0),K=()=>E(!1),T=()=>E(!0);return e.jsxs("div",{className:"m-4 w-full",children:[e.jsx("div",{className:"m-4",children:e.jsx(le,{})}),e.jsx("div",{className:"mt-4 m-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-10",children:[e.jsx("p",{className:"font-bold text-[#5386ED] text-3xl",children:"#00000253"}),w==="retail"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:O,className:"border-2 border-[#5386ED] text-white rounded-full py-1 px-3",children:"Add Customer"}),e.jsx("button",{onClick:r,className:"border-2 border-[#5386ED] text-white rounded-full py-1 px-3",children:"Add Phone"}),e.jsx("button",{onClick:S,className:"border-2 border-[#5386ED] text-white rounded-full py-1 px-3",children:"Add Item"})]}):w==="wholesale"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:B,className:"border-2 border-[#5386ED] text-white rounded-full py-1 px-3",children:"Add Phone"}),e.jsx("button",{onClick:T,className:"border-2 border-[#5386ED] text-white rounded-full py-1 px-3",children:"Add Item"})]}):e.jsx(e.Fragment,{children:e.jsx("button",{onClick:B,className:"border-2 border-[#5386ED] text-white rounded-full py-1 px-3",children:"Add Phone"})})]}),e.jsx("div",{children:e.jsxs("select",{onChange:i=>v(i.target.value),name:"choice",className:"bg-[#5386ED] text-white font-bold p-2 rounded-md",children:[e.jsx("option",{className:"bg-black text-white",value:"retail",selected:!0,children:"Retail Order"}),e.jsx("option",{className:"bg-black text-white",value:"wholesale",children:"Wholesale Order"}),e.jsx("option",{className:"bg-black text-white",value:"return",children:"Return Order"})]})})]})}),e.jsx("div",{children:w==="retail"?e.jsx(ce,{isAddNewCustomerModelOpen:l,isAddNewItemsModelOpen:P,isAddNewPhoneModelOpen:A,handleAddNewCustomerModelClose:N,handleAddNewItemModelClose:k,handleAddNewPhoneModelClose:d}):w==="wholesale"?e.jsx(me,{isAddNewPhoneModelOpen:p,handleAddNewPhoneModelClose:D,isAddNewItemsModelOpen:h,handleAddNewItemModelClose:K}):w==="return"?e.jsx(xe,{isAddNewPhoneModelOpen:p,handleAddNewPhoneModelClose:D}):null})]})}export{be as default};
